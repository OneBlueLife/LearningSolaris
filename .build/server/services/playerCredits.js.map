{
  "version": 3,
  "sources": ["../../../server/services/playerCredits.ts"],
  "sourcesContent": ["import Repository from './repository';\nimport { Game } from './types/Game';\nimport { Player } from './types/Player';\n\nexport default class PlayerCreditsService {\n    gameRepo: Repository<Game>;\n\n    constructor(\n        gameRepo: Repository<Game>\n    ) {\n        this.gameRepo = gameRepo;\n    }\n\n    async addCredits(game: Game, player: Player, amount: number, commit: boolean = true) {\n        player.credits += amount;\n\n        let query: any = {\n            updateOne: {\n                filter: {\n                    _id: game._id,\n                    'galaxy.players._id': player._id\n                },\n                update: {\n                    $inc: {\n                        'galaxy.players.$.credits': amount\n                    }\n                }\n            }\n        }\n\n        if (commit) {\n            await this.gameRepo.bulkWrite([query]);\n        }\n\n        return query;\n    }\n\n    async addCreditsSpecialists(game: Game, player: Player, amount: number, commit: boolean = true) {\n        player.creditsSpecialists += amount;\n\n        let query: any = {\n            updateOne: {\n                filter: {\n                    _id: game._id,\n                    'galaxy.players._id': player._id\n                },\n                update: {\n                    $inc: {\n                        'galaxy.players.$.creditsSpecialists': amount\n                    }\n                }\n            }\n        }\n\n        if (commit) {\n            await this.gameRepo.bulkWrite([query]);\n        }\n\n        return query;\n    }\n\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,MAAO,qBAAmC;AAAA,EAGtC,YACI,UACF;AACE,SAAK,WAAW;AAAA,EACpB;AAAA,EAEA,MAAM,WAAW,MAAY,QAAgB,QAAgB,SAAkB,MAAM;AACjF,WAAO,WAAW;AAElB,QAAI,QAAa;AAAA,MACb,WAAW;AAAA,QACP,QAAQ;AAAA,UACJ,KAAK,KAAK;AAAA,UACV,sBAAsB,OAAO;AAAA,QACjC;AAAA,QACA,QAAQ;AAAA,UACJ,MAAM;AAAA,YACF,4BAA4B;AAAA,UAChC;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAEA,QAAI,QAAQ;AACR,YAAM,KAAK,SAAS,UAAU,CAAC,KAAK,CAAC;AAAA,IACzC;AAEA,WAAO;AAAA,EACX;AAAA,EAEA,MAAM,sBAAsB,MAAY,QAAgB,QAAgB,SAAkB,MAAM;AAC5F,WAAO,sBAAsB;AAE7B,QAAI,QAAa;AAAA,MACb,WAAW;AAAA,QACP,QAAQ;AAAA,UACJ,KAAK,KAAK;AAAA,UACV,sBAAsB,OAAO;AAAA,QACjC;AAAA,QACA,QAAQ;AAAA,UACJ,MAAM;AAAA,YACF,uCAAuC;AAAA,UAC3C;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAEA,QAAI,QAAQ;AACR,YAAM,KAAK,SAAS,UAAU,CAAC,KAAK,CAAC;AAAA,IACzC;AAEA,WAAO;AAAA,EACX;AAEJ;",
  "names": []
}
