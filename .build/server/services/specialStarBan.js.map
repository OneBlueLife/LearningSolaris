{
  "version": 3,
  "sources": ["../../../server/services/specialStarBan.ts"],
  "sourcesContent": ["import { SpecialStar } from \"./types/SpecialStar\";\nconst RNG = require('random-seed');\nconst moment = require('moment');\n\nconst specialStars = require('../config/game/specialStars.json') as SpecialStar[];\n\nexport default class SpecialStarBanService {\n\n    BAN_AMOUNT: number = 2;\n\n    _getCurrentMonthBans(stars: SpecialStar[], amount: number): SpecialStar[] {\n        if (amount <= 0) {\n            throw new Error(`Amount cannot be less than or equal to 0.`);\n        }\n\n        if (amount >= stars.length) {\n            return stars;\n        }\n\n        const now = moment().utc();\n        const seed = now.format('YYYYMM');\n        const rng = RNG.create(seed);\n\n        const bans: SpecialStar[] = [];\n\n        while (bans.length < amount) {\n            const i = rng(stars.length);\n            const id = stars[i];\n\n            bans.push(id);\n            stars.splice(i, 1);\n        }\n\n        return bans;\n    }\n\n    getCurrentMonthBans() {\n        const stars = specialStars.slice();\n        const bans = this._getCurrentMonthBans(stars, this.BAN_AMOUNT);\n\n        return {\n            specialStar: bans\n        };\n    }\n\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,MAAM,MAAM,QAAQ,aAAa;AACjC,MAAM,SAAS,QAAQ,QAAQ;AAE/B,MAAM,eAAe,QAAQ,kCAAkC;AAE/D,MAAO,sBAAoC;AAAA,EAA3C;AAEI,sBAAqB;AAAA;AAAA,EAErB,qBAAqB,OAAsB,QAA+B;AACtE,QAAI,UAAU,GAAG;AACb,YAAM,IAAI,MAAM,2CAA2C;AAAA,IAC/D;AAEA,QAAI,UAAU,MAAM,QAAQ;AACxB,aAAO;AAAA,IACX;AAEA,UAAM,MAAM,OAAO,EAAE,IAAI;AACzB,UAAM,OAAO,IAAI,OAAO,QAAQ;AAChC,UAAM,MAAM,IAAI,OAAO,IAAI;AAE3B,UAAM,OAAsB,CAAC;AAE7B,WAAO,KAAK,SAAS,QAAQ;AACzB,YAAM,IAAI,IAAI,MAAM,MAAM;AAC1B,YAAM,KAAK,MAAM;AAEjB,WAAK,KAAK,EAAE;AACZ,YAAM,OAAO,GAAG,CAAC;AAAA,IACrB;AAEA,WAAO;AAAA,EACX;AAAA,EAEA,sBAAsB;AAClB,UAAM,QAAQ,aAAa,MAAM;AACjC,UAAM,OAAO,KAAK,qBAAqB,OAAO,KAAK,UAAU;AAE7D,WAAO;AAAA,MACH,aAAa;AAAA,IACjB;AAAA,EACJ;AAEJ;AAAC;",
  "names": []
}
