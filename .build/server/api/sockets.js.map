{
  "version": 3,
  "sources": ["../../../server/api/sockets.ts"],
  "sourcesContent": ["const socketio = require('socket.io');\n\nexport default (server) => {\n\n    const io = socketio(server);\n\n    io.on('connection', (socket) => {\n        // When the user opens a game, they will be put\n        // into that room to receive web sockets scoped to the game room.\n        socket.on('gameRoomJoined', (data) => {\n            socket.join(data.gameId); // Join the game room to receive game-wide messages.\n            socket.join(data.userId); // Join a private room to receive user/player specific messages.\n\n            if (data.playerId) {\n                socket.join(data.playerId);\n\n                // Broadcast to all other players that the player joined the room.\n                socket.to(data.gameId).emit('gamePlayerRoomJoined', {\n                    playerId: data.playerId\n                });\n            }\n        });\n\n        socket.on('gameRoomLeft', (data) => {\n            socket.leave(data.gameId)\n            socket.leave(data.userId)\n\n            if (data.playerId) {\n                socket.leave(data.playerId)\n\n                // Broadcast to all other players that the player left the room.\n                socket.to(data.gameId).emit('gamePlayerRoomLeft', {\n                    playerId: data.playerId\n                });\n            }\n        });\n    });\n\n    console.log('Sockets initialized.');\n    \n    return io;\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAM,WAAW,QAAQ,WAAW;AAEpC,IAAO,kBAAQ,CAAC,WAAW;AAEvB,QAAM,KAAK,SAAS,MAAM;AAE1B,KAAG,GAAG,cAAc,CAAC,WAAW;AAG5B,WAAO,GAAG,kBAAkB,CAAC,SAAS;AAClC,aAAO,KAAK,KAAK,MAAM;AACvB,aAAO,KAAK,KAAK,MAAM;AAEvB,UAAI,KAAK,UAAU;AACf,eAAO,KAAK,KAAK,QAAQ;AAGzB,eAAO,GAAG,KAAK,MAAM,EAAE,KAAK,wBAAwB;AAAA,UAChD,UAAU,KAAK;AAAA,QACnB,CAAC;AAAA,MACL;AAAA,IACJ,CAAC;AAED,WAAO,GAAG,gBAAgB,CAAC,SAAS;AAChC,aAAO,MAAM,KAAK,MAAM;AACxB,aAAO,MAAM,KAAK,MAAM;AAExB,UAAI,KAAK,UAAU;AACf,eAAO,MAAM,KAAK,QAAQ;AAG1B,eAAO,GAAG,KAAK,MAAM,EAAE,KAAK,sBAAsB;AAAA,UAC9C,UAAU,KAAK;AAAA,QACnB,CAAC;AAAA,MACL;AAAA,IACJ,CAAC;AAAA,EACL,CAAC;AAED,UAAQ,IAAI,sBAAsB;AAElC,SAAO;AACX;",
  "names": []
}
