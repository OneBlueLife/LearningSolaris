{
  "version": 3,
  "sources": ["../../../server/api/index.ts"],
  "sourcesContent": ["const express = require('express');\nconst http = require('http');\nimport config from '../config';\nimport expressLoader from './express';\nimport mongooseLoader from '../db';\nimport socketLoader from './sockets';\nimport containerLoader from '../services';\n\nlet mongo;\n\nconsole.log(`Node ${process.version}`);\n\nasync function startServer() {\n  mongo = await mongooseLoader(config, {});\n\n  const app = express();\n  const server = http.createServer(app);\n  \n  const io = socketLoader(server);\n  const container = containerLoader(config, io);\n\n  await expressLoader(config, app, container);\n\n  server.listen(config.port, (err) => {\n    if (err) {\n      console.error(err);\n      return;\n    }\n\n    console.log(`Server is running on port ${config.port}.`);\n  });\n\n  await container.discordService.initialize();\n  container.notificationService.initialize();\n}\n\nprocess.on('SIGINT', async () => {\n  console.log('Shutting down...');\n\n  console.log('Disconnecting from MongoDB...');\n  await mongo.disconnect();\n  console.log('MongoDB disconnected.');\n\n  console.log('Shutdown complete.');\n  \n  process.exit();\n});\n\nstartServer();\n\nexport {};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAEA,oBAAmB;AACnB,qBAA0B;AAC1B,gBAA2B;AAC3B,qBAAyB;AACzB,sBAA4B;AAN5B,MAAM,UAAU,QAAQ,SAAS;AACjC,MAAM,OAAO,QAAQ,MAAM;AAO3B,IAAI;AAEJ,QAAQ,IAAI,QAAQ,QAAQ,SAAS;AAErC,eAAe,cAAc;AAC3B,UAAQ,UAAM,UAAAA,SAAe,cAAAC,SAAQ,CAAC,CAAC;AAEvC,QAAM,MAAM,QAAQ;AACpB,QAAM,SAAS,KAAK,aAAa,GAAG;AAEpC,QAAM,SAAK,eAAAC,SAAa,MAAM;AAC9B,QAAM,gBAAY,gBAAAC,SAAgB,cAAAF,SAAQ,EAAE;AAE5C,YAAM,eAAAG,SAAc,cAAAH,SAAQ,KAAK,SAAS;AAE1C,SAAO,OAAO,cAAAA,QAAO,MAAM,CAAC,QAAQ;AAClC,QAAI,KAAK;AACP,cAAQ,MAAM,GAAG;AACjB;AAAA,IACF;AAEA,YAAQ,IAAI,6BAA6B,cAAAA,QAAO,OAAO;AAAA,EACzD,CAAC;AAED,QAAM,UAAU,eAAe,WAAW;AAC1C,YAAU,oBAAoB,WAAW;AAC3C;AAEA,QAAQ,GAAG,UAAU,YAAY;AAC/B,UAAQ,IAAI,kBAAkB;AAE9B,UAAQ,IAAI,+BAA+B;AAC3C,QAAM,MAAM,WAAW;AACvB,UAAQ,IAAI,uBAAuB;AAEnC,UAAQ,IAAI,oBAAoB;AAEhC,UAAQ,KAAK;AACf,CAAC;AAED,YAAY;",
  "names": ["mongooseLoader", "config", "socketLoader", "containerLoader", "expressLoader"]
}
