{
  "version": 3,
  "sources": ["../../../../server/api/routes/conversations.ts"],
  "sourcesContent": ["import { Router } from \"express\";\nimport { ExpressJoiInstance } from \"express-joi-validation\";\nimport { DependencyContainer } from \"../../services/types/DependencyContainer\";\nimport ConversationController from '../controllers/conversation';\nimport { MiddlewareContainer } from \"../middleware\";\n\nexport default (router: Router, mw: MiddlewareContainer, validator: ExpressJoiInstance, container: DependencyContainer) => {\n    const controller = ConversationController(container);\n\n    router.get('/api/game/:gameId/conversations',\n        mw.auth.authenticate(),\n        mw.game.loadGame({\n            lean: true,\n            state: true,\n            conversations: true,\n            'galaxy.players': true\n        }),\n        mw.player.loadPlayer,\n        controller.list,\n        mw.core.handleError);\n\n    router.get('/api/game/:gameId/conversations/private/:withPlayerId',\n        mw.auth.authenticate(),\n        mw.game.loadGame({\n            lean: true,\n            state: true,\n            conversations: true,\n            'galaxy.players': true\n        }),\n        mw.player.loadPlayer,\n        controller.listPrivate,\n        mw.core.handleError);\n\n    router.get('/api/game/:gameId/conversations/unread',\n        mw.auth.authenticate(),\n        mw.game.loadGame({\n            lean: true,\n            state: true,\n            conversations: true,\n            'galaxy.players': true\n        }),\n        mw.player.loadPlayer,\n        controller.getUnreadCount,\n        mw.core.handleError);\n\n    router.get('/api/game/:gameId/conversations/:conversationId',\n        mw.auth.authenticate(),\n        mw.game.loadGame({\n            lean: true,\n            state: true,\n            conversations: true,\n            'galaxy.players': true\n        }),\n        mw.player.loadPlayer,\n        controller.detail,\n        mw.core.handleError);\n\n    router.post('/api/game/:gameId/conversations',\n        mw.auth.authenticate(),\n        mw.game.loadGame({\n            lean: true,\n            state: true,\n            conversations: true,\n            'galaxy.players': true\n        }),\n        mw.game.validateGameState({\n            isUnlocked: true\n        }),\n        mw.player.loadPlayer,\n        controller.create,\n        mw.core.handleError);\n        \n    router.patch('/api/game/:gameId/conversations/:conversationId/send',\n        mw.auth.authenticate(),\n        mw.game.loadGame({\n            lean: true,\n            state: true,\n            conversations: true,\n            'galaxy.players': true\n        }),\n        mw.game.validateGameState({\n            isUnlocked: true\n        }),\n        mw.player.loadPlayer,\n        controller.sendMessage,\n        mw.core.handleError);\n\n    router.patch('/api/game/:gameId/conversations/:conversationId/markAsRead',\n        mw.auth.authenticate(),\n        mw.game.loadGame({\n            lean: true,\n            state: true,\n            conversations: true,\n            'galaxy.players': true\n        }),\n        mw.game.validateGameState({\n            isUnlocked: true\n        }),\n        mw.player.loadPlayer,\n        controller.markAsRead,\n        mw.core.handleError);\n\n    router.patch('/api/game/:gameId/conversations/:conversationId/mute',\n        mw.auth.authenticate(),\n        mw.game.loadGame({\n            lean: true,\n            state: true,\n            conversations: true,\n            'galaxy.players': true\n        }),\n        mw.game.validateGameState({\n            isUnlocked: true\n        }),\n        mw.player.loadPlayer,\n        controller.mute,\n        mw.core.handleError);\n\n    router.patch('/api/game/:gameId/conversations/:conversationId/unmute',\n        mw.auth.authenticate(),\n        mw.game.loadGame({\n            lean: true,\n            state: true,\n            conversations: true,\n            'galaxy.players': true\n        }),\n        mw.game.validateGameState({\n            isUnlocked: true\n        }),\n        mw.player.loadPlayer,\n        controller.unmute,\n        mw.core.handleError);\n\n    router.patch('/api/game/:gameId/conversations/:conversationId/leave',\n        mw.auth.authenticate(),\n        mw.game.loadGame({\n            lean: true,\n            state: true,\n            conversations: true,\n            'galaxy.players': true\n        }),\n        mw.game.validateGameState({\n            isUnlocked: true\n        }),\n        mw.player.loadPlayer,\n        controller.leave,\n        mw.core.handleError);\n\n    router.patch('/api/game/:gameId/conversations/:conversationId/pin/:messageId',\n        mw.auth.authenticate(),\n        mw.game.loadGame({\n            lean: true,\n            state: true,\n            conversations: true,\n            'galaxy.players': true\n        }),\n        mw.game.validateGameState({\n            isUnlocked: true\n        }),\n        mw.player.loadPlayer,\n        controller.pinMessage,\n        mw.core.handleError);\n\n    router.patch('/api/game/:gameId/conversations/:conversationId/unpin/:messageId',\n        mw.auth.authenticate(),\n        mw.game.loadGame({\n            lean: true,\n            state: true,\n            conversations: true,\n            'galaxy.players': true\n        }),\n        mw.game.validateGameState({\n            isUnlocked: true\n        }),\n        mw.player.loadPlayer,\n        controller.unpinMessage,\n        mw.core.handleError);\n\n    return router;\n}"],
  "mappings": "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",
  "names": ["ConversationController"]
}
