{
  "version": 3,
  "sources": ["../../../../server/db/migrations/004-extended-alliance-settings.js"],
  "sourcesContent": ["module.exports = {\n    async migrate(db) {\n        const games = db.collection('games');\n\n        await games.updateMany({\n            'settings.diplomacy.tradeRestricted': { $eq: null }\n        }, {\n            $set: {\n                'settings.diplomacy.tradeRestricted': 'disabled'\n            }\n        });\n\n        await games.updateMany({\n            'settings.diplomacy.upkeepCost': { $eq: null }\n        }, {\n            $set: {\n                'settings.diplomacy.upkeepCost': 'none'\n            }\n        });\n\n        await games.updateMany({\n                'settings.diplomacy.maxAlliances': { $eq: null }\n        }, [{\n            $set: {\n                'settings.diplomacy.maxAlliances': {\n                    $sum: [\n                        '$settings.general.playerLimit',\n                        -1\n                    ]\n                }\n            }\n        }]);\n    }\n};\n"],
  "mappings": ";AAAA,OAAO,UAAU;AAAA,EACb,MAAM,QAAQ,IAAI;AACd,UAAM,QAAQ,GAAG,WAAW,OAAO;AAEnC,UAAM,MAAM,WAAW;AAAA,MACnB,sCAAsC,EAAE,KAAK,KAAK;AAAA,IACtD,GAAG;AAAA,MACC,MAAM;AAAA,QACF,sCAAsC;AAAA,MAC1C;AAAA,IACJ,CAAC;AAED,UAAM,MAAM,WAAW;AAAA,MACnB,iCAAiC,EAAE,KAAK,KAAK;AAAA,IACjD,GAAG;AAAA,MACC,MAAM;AAAA,QACF,iCAAiC;AAAA,MACrC;AAAA,IACJ,CAAC;AAED,UAAM,MAAM,WAAW;AAAA,MACf,mCAAmC,EAAE,KAAK,KAAK;AAAA,IACvD,GAAG,CAAC;AAAA,MACA,MAAM;AAAA,QACF,mCAAmC;AAAA,UAC/B,MAAM;AAAA,YACF;AAAA,YACA;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ,CAAC,CAAC;AAAA,EACN;AACJ;",
  "names": []
}
